{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ titulo|default:"Formulario Estudiante" }}</title>

    <!-- Bootstrap -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

    <!-- Iconos Bootstrap -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        body {
            background: #eef2f7;
            font-family: 'Inter', sans-serif;
        }

        .panel-box {
            background: #ffffff;
            border-radius: 16px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 4px 18px rgba(0,0,0,0.12);
            max-width: 800px;
        }

        .panel-title {
            font-size: 26px;
            font-weight: 800;
            color: #0d47a1;
            margin-bottom: 5px;
            text-align: center;
        }

        .panel-subtitle {
            text-align: center;
            color: #64748b;
            margin-bottom: 20px;
            font-size: 14px;
        }

        label {
            font-weight: 600;
            color: #1e293b;
        }

        .form-control {
            border-radius: 10px;
        }

        .btn-save {
            background: #0d47a1;
            color: #fff;
            border-radius: 10px;
            padding: 10px 18px;
            font-weight: 600;
        }

        .btn-save:hover {
            background: #062e6f;
            color: #fff;
        }

        .btn-back {
            border-radius: 10px;
            padding: 10px 18px;
            background: #e5e7eb;
            color: #111827;
            font-weight: 600;
        }

        .btn-back:hover {
            background: #d1d5db;
            color: #111827;
        }
    </style>
</head>
<body>

<div class="container d-flex justify-content-center">

    <div class="panel-box">

        <h1 class="panel-title">
            {% if modo == "crear" %}
                <i class="bi bi-person-plus-fill"></i> Crear Estudiante
            {% else %}
                <i class="bi bi-pencil-square"></i> Editar Estudiante
            {% endif %}
        </h1>

        <p class="panel-subtitle">
            {% if modo == "crear" %}
                Completa los datos para registrar un nuevo estudiante en la plataforma.
            {% else %}
                Modifica la información académica y de acceso del estudiante seleccionado.
            {% endif %}
        </p>

        <!-- MENSAJES -->
        {% if messages %}
        <div class="mb-3">
            {% for msg in messages %}
            <div class="alert alert-{{ msg.tags }} text-center">
                {{ msg }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- FORMULARIO -->
        <form method="POST" autocomplete="off">
            {% csrf_token %}

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label>Nombre</label>
                    <input type="text"
                           name="nombre"
                           class="form-control"
                           required
                           value="{% if estudiante %}{{ estudiante.user.first_name }}{% endif %}">
                </div>

                <div class="col-md-6 mb-3">
                    <label>Apellido</label>
                    <input type="text"
                           name="apellido"
                           class="form-control"
                           required
                           value="{% if estudiante %}{{ estudiante.user.last_name }}{% endif %}">
                </div>
            </div>

            <div class="mb-3">
                <label>Correo institucional</label>
                <input type="email"
                       name="correo"
                       class="form-control"
                       required
                       placeholder="nombre@chuckyescuela.cl"
                       value="{% if estudiante %}{{ estudiante.user.email }}{% endif %}">
            </div>

            <div class="mb-3">
                <label>RUT del estudiante</label>
                <input type="text"
                       name="rut"
                       class="form-control"
                       placeholder="12.345.678-9"
                       value="{% if estudiante %}{{ estudiante.rut }}{% endif %}">
            </div>

            {% if modo == "crear" %}
            <div class="mb-3">
                <label>Contraseña inicial</label>
                <input type="password"
                       name="password"
                       class="form-control"
                       placeholder="Si dejas vacío se usará: Chucky123*">
            </div>
            {% endif %}

            <div class="d-flex justify-content-between mt-3">
                <a href="{% url 'admin_listar_estudiantes' %}" class="btn btn-back">
                    <i class="bi bi-arrow-left-circle"></i> Volver al listado
                </a>

                <button type="submit" class="btn btn-save">
                    {% if modo == "crear" %}
                        <i class="bi bi-check-circle-fill"></i> Guardar estudiante
                    {% else %}
                        <i class="bi bi-save-fill"></i> Guardar cambios
                    {% endif %}
                </button>
            </div>
        </form>

    </div>

</div>

</body>
</html>
